<!DOCTYPE html>
<head>
	<title>NCSU - Hafley & Smith Model</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8" lang="en-us">
	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css"/>
	<!-- <link href="https://cdn.ncsu.edu/brand-assets/fonts/include.css" rel="stylesheet" type="text/css"/> -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
	<style>
	
		body {margin:0px;padding:0px;}
		
		input:disabled {
			background-color:lightgray;
		}
		
		#main {
			background-color:lightgray;
			max-width:1620px;
			font-family:Helvetica;
			box-shadow: 3px 3px 10px #777777;
			margin-left:auto;
			margin-right:auto;
		}
		
		#headingDiv {background-color:#CC0000;display:flex;}
		#headingDiv-p {margin:5px 0px 5px 20px;font-size:24px;color:white;}
		#headingDiv-NCState{font-weight:bolder;white-space:nowrap;}
		#headingDiv-University{font-weight:100;}
		#headingDiv-HSM{font-size:10px;text-align:right;white-space:nowrap;}
		
		#icDropDown{margin: 0px 0px 0px 15px;}
		#icTBTable{width:100%;text-align:center;}
		#hardwoodCollapse{width:310px !important;}
		#hardwood{width:300px !important;}
		#hwDropDown{width:100%;}
		
		#heightAgeCurve{margin:5px;}
		#heightAgeSelect{align:center;width:95%;}
		
		#ffTable{font-size:.9em;}
		
		#dialogTable1 td{padding:5px;font-size:.6em;}
		#thinningContainer{width:100%;}
		#thinningContainer-select{width:75%;}
		#selectList{cursor:pointer;width:250px;-webkit-appearance:listbox;}
		#thinningContainer-buttons{text-align:center;}
		
		#formButtons{width:40%;text-align:center;}
		#loadDialog-Select{cursor:pointer;width:294px;-webkit-appearance:listbox;}
		#saveDialog{min-height:0px !important;}
		#owDialog{min-height:0px !important;}
		#clearDialog{min-height:0px !important;}
		#loadDialog{min-height:0px !important;}
		#loadDialog-Manage{display:inline;position:absolute;right:3px;bottom:3px;}
		
		
		.collapseContainers{
			min-width:320px;
			display:inline-table;
			margin-left:auto !important;
			margin-right:auto !important;
		}
		
		.collapse {
			text-align:center;
			background-color:black;
			color:white;
			font-size:18px;
			width:100%;
			max-width:320px;
			display:inline-block;
			border-top:1px solid white;
			cursor:pointer;
			padding-top:10px;
			padding-bottom:10px;
		}
		
		.boxed {
			background-color:lightgrey;
			padding:4px;
			max-width:310px;
			border:1px solid black;
			display:none;
			
			font-size:.75em;
		}
		
		.formTextBox {
			display:inline-block;
			width:25%
		}
		
		.hwTD {
			text-align:center;
			width:50%;
		}
		
		.button {
			background-color:#CC0000;
			color:white;
			font-size:.75em;
			padding:5px;
			max-width:50px;
			min-width:39px;
			text-align:center;
			cursor:pointer;
		}
		
		.dialog {
			text-align:center;
		}
		
		.dialogText{
			font-size:.80em;
			margin:10px;
		}
		
		.ui-widget {
    		font-family: Helvetica;
		}

		.ui-widget-overlay {
			position: absolute; 
   			top: 0; 
   			left: 0; 
    		width: 100%; 
    		height: 100%; 
    		background: #000;
    		opacity: 0.3;
		}
		
		.ui-front {
   			z-index: 100;
		}

		.ui-widget-content {
			background: #FFFFFF;
    		border: 1px solid #000000;
    		color: #666666;
		}

		.ui-dialog {
    		left: 0;
    		outline: 0 none;
    		padding: 0;
    		position: absolute;
    		top: 0;
		}

		.ui-dialog .ui-dialog-content {
    		background: none repeat scroll 0 0 transparent;
    		border: 0 none;
    		overflow: auto;
    		position: relative;
    		padding: 0;
		}

		.ui-widget-header {
    		background: #CC0000;
    		border: 0;
    		color: #fff;
    		font-weight: normal;
		}

		.ui-dialog .ui-dialog-titlebar {
    		padding: 0.1em .5em;
    		position: relative;
        	font-size: 1em;
		}

		.ui-dialog .ui-dialog-titlebar-close {
			display:none;
		}
		
	</style>
	<script>
		$(document).ready(function(){
			//START PAGE INITIALIZATION
			checkEnabledFF();
			checkEnabledThinning();
			$("body").ready(function(){ //start reset form
				$("#loblollyPine").prop('checked', true);
				$("#whitePine").prop('checked', false);
				$("#icDropDown").val("0");
				$('#tpaTB').val("700");
				$("#ageTB").val("");
				$("#sizeTB").val("");
				$("#survTB").val("85");
				$("#hwDropDown").val("0");
				$("#totalBATB").val("");
				$("#atAgeTB").val("");
				$("#BA25").prop('checked', true);
				$("#BA50").prop('checked', false);
				$("#siteIndexValue").val("65");
				$("#heightAgeSelect").val("piedmont/upland");
				$("#enableFusiform").prop('checked', false);
				$("#infection").val("");
				$("#ffatAgeTB").val("");
				$("#hazardRating").val("");
				$("#enableThinnings").prop('checked', false);
				$("#outputVariable").text("HTML");
				$("#start").val("5");
				$("#end").val("35");
				$("#interval").val("5");
				$("#thinningContainer-select").html("<select name='selectList' id='selectList' multiple></select>");
				thinningsCounter = 0;
			});//END default settings
			//END PAGE INITIALIZATION
			
			//START FORM SIZE SNAPPING
			if($(window).width()<645){
					$("#main").css("max-width", 320);
				}else if($(window).width()<969){
					$("#main").css("max-width", 645);
				}else if($(window).width()<1294){
					$("#main").css("max-width", 969);
				}else if($(window).width()<1620){
					$("#main").css("max-width", 1294);
				}else{
					$("#main").css("max-width", 1620);
			}
			$(window).resize(function () {
				if($(window).width()<645){
					$("#main").css("max-width", 320);
				}else if($(window).width()<969){
					$("#main").css("max-width", 645);
				}else if($(window).width()<1294){
					$("#main").css("max-width", 969);
				}else if($(window).width()<1620){
					$("#main").css("max-width", 1294);
				}else{
					$("#main").css("max-width", 1620);
				}
			});
			//END FORM SIZE SNAPPING
			
			//START INITIAL CONDITIONS FUNCTIONS
			$("#icCollapse").click(function(){ //initialConditions collapse animation
        		$("#initialConditions").slideToggle("slow");
    		}); //end of initialConditions collapse animation
			
			$('#icDropDown').change(function(){ //initialConditions textbox function
				if(this.value == 0){
					$("#tpaTB").removeAttr("disabled");
					$("#ageTB").attr("disabled", "disabled");
					$("#sizeTB").attr("disabled", "disabled");
					$("#icVariable").text("Size");
					$("#survTB").removeAttr("disabled");
				}else if(this.value == 1){
					$("#tpaTB").removeAttr("disabled");
					$("#ageTB").removeAttr("disabled");
					$("#sizeTB").attr("disabled", "disabled");
					$("#icVariable").text("Size");
					$("#survTB").attr("disabled", "disabled");
				}else if(this.value == 2){
					$("#tpaTB").removeAttr("disabled");
					$("#ageTB").removeAttr("disabled");
					$("#icVariable").text("BA");
					$("#sizeTB").removeAttr("disabled");
					$("#survTB").attr("disabled", "disabled");
				}else{
					$("#tpaTB").removeAttr("disabled");
					$("#ageTB").removeAttr("disabled");
					$("#icVariable").text("Dq");
					$("#sizeTB").removeAttr("disabled");
					$("#survTB").attr("disabled", "disabled");
				}
			}); //end of initialConditions textbox function
		
			$("#hardwoodCollapse").click(function(){ //hardwood collapse animation
        		$("#hardwood").slideToggle("slow");
    		}); //end of hardwood collapse animation
		
    		$('#hwDropDown').change(function(){//hardwood textbox function
        		if(this.value == 0){
					$("#totalBATB").attr("disabled", "disabled");
					$("#atAgeTB").attr("disabled", "disabled");
				}else{
					$("#totalBATB").removeAttr("disabled");
					$("#atAgeTB").removeAttr("disabled");
				}
			}); //end of hardwood textbox function
			//END INITIALCONDITIONS FUNCTIONS
			
			//START SITE INDEX FUNCTIONS
			$("#siCollapse").click(function(){ //siteIndex collapse animation
        		$("#siteIndex").slideToggle("slow");
    		}); //end of siteIndex collapse animation
			//END SITEINDEX FUNCTIONS
			
			//START FUSIFORM FUNCTIONS
			$("#ffCollapse").click(function(){ //fusiform collapse animation
        		$("#fusiform").slideToggle("slow");
    		}); //end of fusiform collapse animation
			
			function checkEnabledFF (){ //enables and disables fusiform
				if($("#enableFusiform").is(':checked')==false){
					$("#infection").attr("disabled", "disabled");
					$("#ffatAgeTB").attr("disabled", "disabled");
					$("#hazardRating").attr("disabled", "disabled");
				}else{
					$("#infection").removeAttr("disabled");
					$("#ffatAgeTB").removeAttr("disabled");
					$("#hazardRating").removeAttr("disabled");
				}
			}
			
			$("#enableFusiform").click(function(){ //click event for fusiform enable
				checkEnabledFF();
			});
			//END FUSIFORM FUNCTIONS
			
			//START THINNINGS FUNCTIONS
			$("#thinningsCollapse").click(function(){ //thinnings collapse animation
        		$("#thinnings").slideToggle("slow");
    		}); //end of thinnings collapse animation
			
			function checkEnabledThinning (){ //enables or disables thinnings section
				if($("#enableThinnings").is(':checked')==false){
					$("#selectList").attr("disabled", "disabled");
					$("#addThinning").css("pointer-events","none");
					$("#delThinning").css("pointer-events","none");
					$("#addThinning").css("background-color","grey");
					$("#delThinning").css("background-color","grey");
				}else{
					$("#selectList").removeAttr("disabled");
					$("#addThinning").css("pointer-events","auto");
					$("#delThinning").css("pointer-events","auto");
					$("#addThinning").css("background-color","#CC0000");
					$("#delThinning").css("background-color","#CC0000");
				}
			}
			
			$("#enableThinnings").click(function(){ //click event for thinning enable
				checkEnabledThinning();
			});
			
			function collectThinnings() { //start thinning save collection
				var thinningsArray = document.getElementById("selectList").options;
				for(i=0;i<thinningsArray.length;i++){
					thinningsString = thinningsString + "^" + thinningsArray[i].text;
					
				}
				if (thinningsArray.length == 0){
					return "none";
				}
				return thinningsString;
			} //end thinning save collection
			
			$("#thinningDialog").dialog({ //Dialog initialization
				modal:true,
				draggable:false,
				resizeable:false,
				position:{ my: "center center", at: "center center", of: "#main" },
				show: 'blind',
				hide: 'blind',
				width: 300,
				autoOpen:false,
			}); //end of Dialog initialization
			
			var thinningsCounter = 0; //option value counter
			
			$('#addThinning').click(function(){ //Add button function
				$("#thinningDialog").dialog("open");
			}); //end of Add button function

			$('#dialogOK').click(function(){ //OK button function
				$('#selectList').append("<option value='"+thinningsCounter+"'>"+$('#thinAtAge').val()+" - "+$('#dialogSelect option:selected').text()+" - "+$('#leaveTB').val()+"</option>");
				$("#thinningDialog").dialog("close");
				$('#thinAtAge').val("");
				$('#dialogSelect').val("1");
				$('#leaveTB').val("");
			});//end of OK button function

			$('#dialogCancel').click(function(){ //Cancel button function
				$("#thinningDialog").dialog("close");
			});//end of Cancel button function

			$('#delThinning').click(function(){ //Delete button function
				$('#selectList option:selected').each(function(){
					$(this).remove();
				});
			});//end of Delete button function
			//END THINNING FUNCTIONS
			
			//START OUTPUTTYPE FUNCTIONS
			$("#otCollapse").click(function(){
        		$("#outputtype").slideToggle("slow");
    		});
			//END OUTPUTTYPE FUNCTIONS
			
			//START TOSTRING FUNCTION
			var runOutput = ""; //output string
			var thinningsString = ""; //output string for thinnings collection
			
			function checkTB(e) { //start checks textbox values before running **unfinished**
				if(e == ''){
					return "";
				}else{
					return e;
				}
			} //end checks textbox values before running
			
			function toStringOutput() { //start save string format
				thinningsString = "";
				runOutput = $("input[name='species']:checked").val()+"^"
					+$("#icDropDown").val()+"^"
					+checkTB($('#tpaTB').val())+"^"
					+checkTB($("#ageTB").val())+"^"
					+checkTB($("#sizeTB").val())+"^"
					+checkTB($("#survTB").val())+"^"
					+$("#hwDropDown").val()+"^"
					+checkTB($("#totalBATB").val())+"^"
					+checkTB($("#atAgeTB").val())+"^"
					+$("input[name='baseAge']:checked").val()+"^"
					+checkTB($("#siteIndexValue").val())+"^"
					+$("#heightAgeSelect").val()+"^"
					+$("#enableFusiform").is(':checked')+"^"
					+checkTB($("#infection").val())+"^"
					+checkTB($("#ffatAgeTB").val())+"^"
					+checkTB($("#hazardRating").val())+"^"
					+$("#enableThinnings").is(':checked')+"^"
					+$("#outputVariable").text()+"^"
					+checkTB($("#start").val())+"^"
					+checkTB($("#end").val())+"^"
					+checkTB($("#interval").val())
					+collectThinnings()
				return runOutput;
			} //end save string format
			//END toString function
			
			//START RUN FUNCTION
			$("#run").click(function(){ //start run button
				var outputString = toStringOutput();
				ca = outputString.split('^');
				var resultsWindow = window.open("", "_blank", "width=660,height=400");
				resultsWindow.document.write("<title>Results</title><style>td{padding:2px;} #labels td{border-bottom:1px solid;} #end td{border-top:1px solid;}</style><div style='text-align:center'><p><h2>NCSU PLANTATION MANAGEMENT SIMULATOR</h2></p><h2>YIELD TABLE ("+ca[0]+")</h2><p></p></div>"+
				"<table style='text-align:center;margin-left:auto;margin-right:auto;'><tr><td>SITE INDEX<br>(BASE AGE "+ca[9]+")</td><td>PLANTING DENSITY<br>(STEMS/ACRE)</td><td>PERCENT PLANTING<br>SURVIVAL</td><td>INITIAL SURVIVAL<br>(STEMS/ACRE)</td></tr><tr><td>"+ca[10]+"</td><td>"+ca[2]+"</td><td>"+ca[5]+"</td><td>595</td></tr></table>"+
				"<table style='text-align:center;margin-left:auto;margin-right:auto;'>"+
				"<tr><td></td><td>DOM</td><td></td><td>AVE</td><td>AVE</td><td colspan='2'>BASAL AREA</td><td colspan='2'>TOTAL VOLUME</td><td colspan='2'>PINE</td></tr>"+
				"<tr><td>AGE</td><td>HGT</td><td>TPA</td><td>DIA</td><td>HGT</td><td>PINE</td><td>HDWD</td><td>PINE</td><td>HDWD</td><td>MAI</td><td>PAI</td></tr>"+
				"<tr id='labels'><td>(yrs)</td><td>(ft)</td><td></td><td>(in)</td><td>(ft)</td><td colspan='2'>(sq ft)</td><td colspan='2'>(cu ft - ib)</td><td></td><td></td></tr>"+
				"<tr><td>11</td><td>22</td><td>33</td><td>44</td><td>55</td><td>66</td><td>77</td><td>88</td><td>99</td><td>1010</td><td>1111</td></tr>"+
				"<tr id='end'><td></td><td></td><td></td><td></td><td></td><td colspan='2'></td><td colspan='2'></td><td></td><td></td></tr></table><p style='text-align:center'>NOTE: HEIGHT/AGE CURVE - <span style='text-transform:uppercase'>"+ca[11]+"</span></p>"
				);
			}); // end run button
			//END RUN FUNCTION
			
			//START SAVE FUNCTIONS
			$("#saveDialog").dialog({ //Dialog initialization
				modal:true,
				draggable:false,
				resizeable:false,
				position:{ my: "center center", at: "center center", of: "#main" },
				show: 'blind',
				hide: 'blind',
				width: 300,
				dialogClass:'dialogTest',
				autoOpen:false,
			}); //end of Dialog initialization
			
			$('#saveDialog-Cancel').click(function(){ //Cancel button function
				$("#saveDialog").dialog("close");
				$("#saveName").val("");
			});//end of Cancel button function
			
			$('#saveDialog-Save').click(function(){ //Save button function
				if(checkSaveName($("#saveName").val())===true){
					owError($("#saveName").val());
				}else{
					localStorage.setItem($("#saveName").val(), toStringOutput());
					$("#saveName").val("");
					$("#saveDialog").dialog("close");
				}
			});//end of Save button function
			
			//START overwrite function
			$("#owDialog").dialog({ //Dialog initialization
					modal:true,
					draggable:false,
					resizeable:false,
					position:{ my: "center center", at: "center center", of: "#main" },
					show: 'blind',
					hide: 'blind',
					width: 300,
					autoOpen:false,
			}); //end of Dialog initialization
			
			function owError(name) { //start overwrite error dialog handler
				$("#owDialog").dialog('open');
				$("#saveVariable").text(name);
			} //end overwrite error dialog handler
			
			$("#owDialog-Yes").click(function(){ //start overwrite yes/no buttons
					localStorage.setItem($("#saveName").val(), toStringOutput());
					$("#saveDialog").dialog("close");
					$("#owDialog").dialog("close");
				});
				$("#owDialog-No").click(function(){
					$("#owDialog").dialog("close");
				}); //end overwrite yes/no buttons
			//END overwrite function
			
			$("#save").click(function(){
				$("#saveDialog").dialog('open');
			});
			//END SAVE FUNCTIONS
			
			//START LOAD FUNCTIONS
			$("#loadDialog").dialog({ //Dialog initialization
				modal:true,
				draggable:false,
				resizeable:false,
				position:{ my: "center center", at: "center center", of: "#main" },
				show: 'blind',
				hide: 'blind',
				width: 300,
				autoOpen:false,
			}); //end of Dialog initialization
			
			$('#loadDialog-Cancel').click(function(){ //Cancel button function
				if($('#loadDialog-Cancel').html()=="Cancel"){
					resetLoadSelect();
					$("#loadDialog").dialog("close");
				}else{
					$("#clearDialog").dialog("open");
				}
			});//end of Cancel button function
			
			$('#loadDialog-Load').click(function(){ //Load button function
				if($("#loadDialog-Load").html()=="Load"){
					reset();
					var ca = getSave($("#loadDialog-Select option:selected").text()).split("^");
					if(ca[0] == 'Loblolly'){
						$("#loblollyPine").prop('checked', true);
						$("#whitePine").prop('checked', false);
					}else{
						$("#loblollyPine").prop('checked', false);
						$("#whitePine").prop('checked', true);
					}
					$("#icDropDown").val(ca[1]);
					$('#tpaTB').val(ca[2]);
					$("#ageTB").val(ca[3]);
					$("#sizeTB").val(ca[4]);
					$("#survTB").val(ca[5]);
					$("#hwDropDown").val(ca[6]);
					$("#totalBATB").val(ca[7]);
					$("#atAgeTB").val(ca[8]);
					if(ca[9] == 25){
						$("#BA25").prop('checked', true);
						$("#BA50").prop('checked', false);
					}else{
						$("#BA25").prop('checked', false);
						$("#BA50").prop('checked', true);
					}
					$("#siteIndexValue").val(ca[10]);
					$("#heightAgeSelect").val(ca[11]);
					if(ca[12] == true){
						$("#enableFusiform").prop('checked', true);
					}else{
						$("#enableFusiform").prop('checked', false);
					}
					$("#infection").val(ca[13]);
					$("#ffatAgeTB").val(ca[14]);
					$("#hazardRating").val(ca[15]);
					if(ca[16] == true){
						$("#enableThinnings").prop('checked', true);
					}else{
						$("#enableThinnings").prop('checked', false);
					}
					$("#outputVariable").text(ca[17]);
					$("#start").val(ca[18]);
					$("#end").val(ca[19]);
					$("#interval").val(ca[20]);
					loadThinnings(ca);
					checkEnabledFF();
					checkEnabledThinning();
					resetLoadSelect();
					thinningsCounter = 0;
					$("#loadDialog").dialog("close");
				}else{
					localStorage.removeItem($("#loadDialog-Select option:selected").text());
					$("#loadDialog-Select option:selected").remove();
				}
			});//end of Load button function
			
			$("#loadDialog-Manage").click(function(){ //start manage mode toggle
				if($("#loadDialog-Manage").html()=="Manage"){
					$('#loadDialog').dialog('option', 'title', 'Manage Saves');
					$("#loadDialog-Manage").html("Done");
					$("#loadDialog-Load").html("Delete");
					$("#loadDialog-Cancel").html("Clear All");
				}else{
					$('#loadDialog').dialog('option', 'title', 'Load');
					$("#loadDialog-Manage").html("Manage");
					$("#loadDialog-Load").html("Load");
					$("#loadDialog-Cancel").html("Cancel");
				}
			}); //end manage mode toggle
			
			//START clear function
			$("#clearDialog").dialog({ //Dialog initialization
					modal:true,
					draggable:false,
					resizeable:false,
					position:{ my: "center center", at: "center center", of: "#main" },
					show: 'blind',
					hide: 'blind',
					width: 300,
					autoOpen:false,
			}); //end of Dialog initialization
			
			$("#clearDialog-Yes").click(function(){ //start clear saves dialog yes button
				localStorage.clear();
				resetLoadSelect();
				$("#clearDialog").dialog("close");
			}); //end clear saves dialog yes button
			$("#clearDialog-No").click(function(){ //start clear saves dialog no button
				$("#clearDialog").dialog("close");
			}); //end clear saves dialog no button
			//END ckear function
			
			function loadThinnings(ca){//start load thinnings function
				if(ca[21]!="none"){
					for(i=21;i<ca.length;i++){
						$('#selectList').append("<option value='"+thinningsCounter+"'>"+ca[i]+"</option>");
						thinningsCounter++;
					}
				}
			}//end load thinnings function
			
			function resetLoadSelect(){//start load dialog reset
				$("#selectCell").html("<select id='loadDialog-Select' size='3'></select>")
			}//end load dialog reset
			
			$("#load").click(function(){//start load dialog opener function
				for(i=0;i<localStorage.length;i++){
					$('#loadDialog-Select').append("<option value='"+i+"'>"+localStorage.key(i)+"</option>");
				}
				$("#loadDialog").dialog('open');
			});//end load dialog opener function
			//END LOAD FUNCTIONS
			
			//START LOCALSTORAGE HANDLERS
			function getSave(cname) { //start getting local save information
				return localStorage.getItem(cname);
			} //end getting local save information
			function checkSave(cname) { //start check for local save
				if (cname!=null) {
					return true;
				}else{
					return false;
				}
			} //end check for local save
			
			function checkSaveName(name){ //start check save
				var strg = localStorage.length
				for(i=0;i<strg;i++){
					if(localStorage.key(i) == name){
						return true;
					}else{
						return false;
					}
				}
			} //end check save
			//END LOCALSTORAGE HANDLERS
			
			//START RESET
			function reset(){ //start reset form
				$("#loblollyPine").prop('checked', true);
				$("#whitePine").prop('checked', false);
				$("#icDropDown").val("0");
				$('#tpaTB').val("");
				$("#ageTB").val("");
				$("#sizeTB").val("");
				$("#survTB").val("");
				$("#hwDropDown").val("0");
				$("#totalBATB").val("");
				$("#atAgeTB").val("");
				$("#BA25").prop('checked', true);
				$("#BA50").prop('checked', false);
				$("#siteIndexValue").val("");
				$("#heightAgeSelect").val("piedmont/upland");
				$("#enableFusiform").prop('checked', false);
				$("#infection").val("");
				$("#ffatAgeTB").val("");
				$("#hazardRating").val("");
				$("#enableThinnings").prop('checked', false);
				$("#outputVariable").text("HTML");
				$("#start").val("");
				$("#end").val("");
				$("#interval").val("");
				$("#thinningContainer-select").html("<select name='selectList' id='selectList' multiple></select>");
				thinningsCounter = 0;
				checkEnabledFF();
				checkEnabledThinning();
			} //end reset form
			
			//clear disabled textboxes
			$("select").change(function() { //start clear disabled textboxes
				if($("input[type='text']").is(':disabled')){
					$("input:disabled").val("");
				}
			}); //end clear disabled textboxes
			//end clear disabled function
			
			$("#reset").click(function(){ //start reset button
				reset();
			}); //end reset button
			//END RESET
		});
	</script>
</head>
<body>
	<form>
		<div id="main">
			<div id="headingDiv">
				<p id="headingDiv-p">
					<span id="headingDiv-NCState">NC STATE</span>
					<span id="headingDiv-University">UNIVERSITY</span>
					<span id="headingDiv-HSM">HAFLEY & SMITH MODEL</span>
				</p>
			</div><!-- END headingDiv -->
			<div id="icContainer" class="collapseContainers">
			<div id="icCollapse" class="collapse">Initial Conditions</div>
			<div class="boxed" id="initialConditions">
				<input type="radio" name="species" id="loblollyPine" value="Loblolly" checked>Loblolly pine
				<input type="radio" name="species" id="whitePine" value="White">White pine
				<br>
				<br>
				<select name="icDropDown" id="icDropDown">
					<option value="0">TPA at establishment</option>
					<option value="1">TPA and Age</option>
					<option value="2">TPA, BA, and Age</option>
					<option value="3">TPA, Dq, and Age</option>
				</select>
				<br>
				<table id="icTBTable">
					<tr>
						<div class="formTextBox">TPA:<br><input type="text" name="tpa" size="5" id="tpaTB"></div>
						<div class="formTextBox">Age:<br><input type="text" name="age" size="5" id="ageTB" disabled></div>
						<div class="formTextBox"><span id="icVariable">Size</span>:<br><input type="text" name="size" size="5" id="sizeTB" disabled></div>
						<div class="formTextBox">Survival:<br><input type="text" name="survival" size="5" id="survTB"></div>
					</tr>
				</table>
				<div id="hwContainer" class="collapseContainers">
				<div id="hardwoodCollapse" class="collapse">Hardwood</div>
				<div class="boxed" id="hardwood">
					<select name="hwDropDown" id="hwDropDown">
						<option value="0">None</option>
						<option value="1">Decurrent(e.g. oak)</option>
						<option value="2">Excurrent(e.g. sweetgum)</option>
						<option value="3">Mixed</option>
					</select>
					<table id="hwTBTable">
						<tr>
							<td class="hwTD">% total BA<br><input type="text" name="%totalBA" size="10" id="totalBATB" disabled></td>
							<td class="hwTD">At Age:<br><input type="text" name="atAge" size="10" id="atAgeTB" disabled></td>
						</tr>
					</table>
				</div><!-- END hardwood -->
				</div>
			</div><!-- END initialConditions -->
			</div>
			<div id="siContainer" class="collapseContainers">
			<div id="siCollapse" class="collapse">Site Index</div>
			<div class="boxed" id="siteIndex">
				<input type="radio" name="baseAge" value="25" id="BA25" checked>Base Age 25
				<input type="radio" name="baseAge" value="50" id="BA50">Base Age 50
				<br>
				<br>
				Site Index Value: <input type="text" name="siteIndexValue" id="siteIndexValue" size="10">
				<br>
				<div id="heightAgeCurve">
					Height/Age Curve:
					<br>
					<select name="heightAgeSelect" id="heightAgeSelect">
						<option value="lower coastal plain/wet sites">lower coastal plain/wet sites</option>
						<option value="upper coastal plain">upper coastal plain</option>
						<option value="piedmont/upland">piedmont/upland</option>
					</select>
				</div> <!-- END heightAgeCurve -->
			</div><!-- END siteIndex -->
			</div>
			<div id="ffContainer" class="collapseContainers">
			<div id="ffCollapse" class="collapse">Fusiform</div>
			<div class="boxed" id="fusiform">
				<table id="ffTable">
					<tr>
						<td><input type="checkbox" name="enableFusiform" id="enableFusiform">Enable</td>
						<td>Infection %:</td>
						<td>at Age:</td>
						<td>Hazard rating:</td>
					</tr>
					<tr>
						<td><div class="button" id="viewMap" onclick="window.open('http://i.imgur.com/W140xwC.png', 'MsgWindow', 'width=640, height=400');">View Map</div></td>
						<td><input type="text" name="infection%" id="infection" size="6"></td>
						<td><input type="text" name="atAge" id="ffatAgeTB" size="6"></td>
						<td><input type="text" name="hazardRating" id="hazardRating" size="6"></td>
					</tr>
				</table>
			</div>
			</div>
			<div id="thinningsContainer" class="collapseContainers">
			<div id="thinningsCollapse" class="collapse">Thinnings</div>
			<div class="boxed" id="thinnings">
				<input type="checkbox" name="enableThinnings" id="enableThinnings">Enable Thinnings
				<br>
				<br>
				<div id="thinningDialog" title="Add Thinning">
					<table id="dialogTable1">
						<tr>
							<td>Thin at Age<br><input type="text" name="thinAtAge" id="thinAtAge" size="5"></td>
							<td>
								Thin to residual
								<br>
								<select id="dialogSelect">
									<option value="0">Basal Area</option>
									<option value="1">Row Thinning</option>
									<option value="2">Trees Per Acre</option>
								</select>
							</td>
							<td>
								<br>
								Leave
								<br>
								<input type="text" name="leaveTB" id="leaveTB" size="5">
								<br>
								TPA
							</td>
						</tr>
					</table>
					<table id="dialogTable2">
						<tr>
							<td><div class="button" id="dialogOK">OK</div></td>
							<td><div class="button" id="dialogCancel">Cancel</div></td>
							<td><div class="button" id="dialogHelp">Help</div></td>
						</tr>
					</table>
				</div><!-- END thinningDialog -->
				Age: Type of thinning
				<table id="thinningContainer">
					<tr>
						<td id="thinningContainer-select">
							<select name="selectList" id="selectList" multiple>
							</select>
						</td>
						<td id="thinningContainer-buttons">
							<div class="button" id="addThinning">Add</div><br>
							<div class="button" id="delThinning">Delete</div>
						</td>
					</tr>
				</table>
			</div><!-- END thinnings -->
			</div>
			<div id="otContainer" class="collapseContainers">
			<div id="otCollapse" class="collapse">Output Type</div>
			<div class="boxed" id="outputtype">
				Output to: <span id="outputVariable">HTML</span>
				<br>
				<table>
					<tr>
						<td>
							<br>
							Report Interval: 
						</td>
						<td>
							Start
							<br>
							<input type="text" name="start" id="start" size="5">
						</td>
						<td>
							End
							<br>
							<input type="text" name="end" id="end" size="5">
						</td>
						<td>
							Interval
							<br>
							<input type="text" name="interval" id="interval" size="5">
						</td>
					</tr>
				</table>
			</div><!-- END outputtype -->
			</div>
			<div class="dialog" id="saveDialog" title="Save"><!-- START saveDialog -->
				<br>
				<span class="dialogText">Save as:</span> <input type="text" id="saveName">
				<br>
				<table id="saveDialog-Buttons">
				<tr>
					<td><div class="button" id="saveDialog-Save">Save</div></td>
					<td><div class="button" id="saveDialog-Cancel">Cancel</div></td>
				</tr>
			</table>
			</div><!-- END saveDialog -->
			<div class="dialog" id="loadDialog" title="Load"><!-- START loadDialog -->
				<table>
					<tr>
						<td id="selectCell">
							<select id="loadDialog-Select" size="3">
							</select>
						</td>
					</tr>
				</table>
				<table id="loadDialog-Buttons">
				<tr>
					<td><div class="button" id="loadDialog-Load">Load</div></td>
					<td><div class="button" id="loadDialog-Cancel">Cancel</div></td>
					<td><div class="button" id="loadDialog-Manage">Manage</div></td>
				</tr>
			</table>
			</div><!-- END loadDialog -->
			<div id="owDialog" title="Overwrite?"><!-- START owDialog -->
				<span class="dialogText"><span class="dialog" id="saveVariable">Save</span> already exists. Do you wish to overwrite it?</span>
				<table>
					<tr>
						<td><div class="button" id="owDialog-Yes">Yes</div></td>
						<td><div class="button" id="owDialog-No">No</div></td>
					</tr>
				</table>
			</div><!-- END owDialog -->
			<div id="clearDialog" title="Clear All Saves?"><!-- START clearDialog -->
				<span class="dialogText">Do you wish to permanently clear all saves?<br></span>
				<table>
					<tr>
						<td><div class="button" id="clearDialog-Yes">Yes</div></td>
						<td><div class="button" id="clearDialog-No">No</div></td>
					</tr>
				</table>
			</div><!-- END clearDialog -->
			<div id="btContainer" class="collapseContainers">
			<table id="formButtons">
				<tr>
					<td><div class="button" id="run">Run</div></td>
					<td><div class="button" id="config">Config</div></td>
					<td><div class="button" id="load">Load</div></td>
					<td><div class="button" id="save">Save</div></td>
					<td><div class="button" id="reset">Reset</div></td>
					<td><div class="button" id="help">Help</div></td>
				</tr>
			</table>
			</div>
		</div><!-- END main -->
	</form>
</body>
